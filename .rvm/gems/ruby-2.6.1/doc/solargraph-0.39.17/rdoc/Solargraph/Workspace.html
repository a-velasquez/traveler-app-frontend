<!DOCTYPE html>

<html>
<head>
<meta charset="UTF-8">

<title>class Solargraph::Workspace - solargraph-0.39.17 Documentation</title>

<script type="text/javascript">
  var rdoc_rel_prefix = "../";
  var index_rel_prefix = "../";
</script>

<script src="../js/navigation.js" defer></script>
<script src="../js/search.js" defer></script>
<script src="../js/search_index.js" defer></script>
<script src="../js/searcher.js" defer></script>
<script src="../js/darkfish.js" defer></script>

<link href="../css/fonts.css" rel="stylesheet">
<link href="../css/rdoc.css" rel="stylesheet">




<body id="top" role="document" class="class">
<nav role="navigation">
  <div id="project-navigation">
    <div id="home-section" role="region" title="Quick navigation" class="nav-section">
  <h2>
    <a href="../index.html" rel="home">Home</a>
  </h2>

  <div id="table-of-contents-navigation">
    <a href="../table_of_contents.html#pages">Pages</a>
    <a href="../table_of_contents.html#classes">Classes</a>
    <a href="../table_of_contents.html#methods">Methods</a>
  </div>
</div>

    <div id="search-section" role="search" class="project-section initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <div id="search-field-wrapper">
      <input id="search-field" role="combobox" aria-label="Search"
             aria-autocomplete="list" aria-controls="search-results"
             type="text" name="search" placeholder="Search" spellcheck="false"
             title="Type to search, Up and Down to navigate, Enter to load">
    </div>

    <ul id="search-results" aria-label="Search Results"
        aria-busy="false" aria-expanded="false"
        aria-atomic="false" class="initially-hidden"></ul>
  </form>
</div>

  </div>

  

  <div id="class-metadata">
    
    <div id="parent-class-section" class="nav-section">
  <h3>Parent</h3>

  
  <p class="link">Object
  
</div>

    
    
    <!-- Method Quickref -->
<div id="method-list-section" class="nav-section">
  <h3>Methods</h3>

  <ul class="link-list" role="directory">
    
    <li ><a href="#method-c-new">::new</a>
    
    <li ><a href="#method-i-config">#config</a>
    
    <li ><a href="#method-i-configured_require_paths">#configured_require_paths</a>
    
    <li ><a href="#method-i-filenames">#filenames</a>
    
    <li ><a href="#method-i-gemspec-3F">#gemspec?</a>
    
    <li ><a href="#method-i-gemspecs">#gemspecs</a>
    
    <li ><a href="#method-i-generate_require_paths">#generate_require_paths</a>
    
    <li ><a href="#method-i-has_file-3F">#has_file?</a>
    
    <li ><a href="#method-i-load_sources">#load_sources</a>
    
    <li ><a href="#method-i-merge">#merge</a>
    
    <li ><a href="#method-i-remove">#remove</a>
    
    <li ><a href="#method-i-require_plugins">#require_plugins</a>
    
    <li ><a href="#method-i-source">#source</a>
    
    <li ><a href="#method-i-source_hash">#source_hash</a>
    
    <li ><a href="#method-i-sources">#sources</a>
    
    <li ><a href="#method-i-synchronize-21">#synchronize!</a>
    
    <li ><a href="#method-i-would_merge-3F">#would_merge?</a>
    
    <li ><a href="#method-i-would_require-3F">#would_require?</a>
    
  </ul>
</div>

  </div>
</nav>

<main role="main" aria-labelledby="class-Solargraph::Workspace">
  <h1 id="class-Solargraph::Workspace" class="class">
    class Solargraph::Workspace
  </h1>

  <section class="description">
    
<p>A workspace consists of the files in a project&#39;s directory and the project&#39;s configuration. It provides a <a href="Source.html"><code>Source</code></a> for each file to be used in an associated <a href="Library.html"><code>Library</code></a> or <a href="ApiMap.html"><code>ApiMap</code></a>.</p>

  </section>

  
  <section id="5Buntitled-5D" class="documentation-section">
    

    

    

    
    <section class="attribute-method-details" class="method-section">
      <header>
        <h3>Attributes</h3>
      </header>

      
      <div id="attribute-i-directory" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">directory</span><span
            class="attribute-access-type">[R]</span>
        </div>

        <div class="method-description">
        
        <p>@return [String]</p>
        
        </div>
      </div>
      
      <div id="attribute-i-gemnames" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">gemnames</span><span
            class="attribute-access-type">[R]</span>
        </div>

        <div class="method-description">
        
        <p>@return [Array&lt;String&gt;]</p>
        
        </div>
      </div>
      
      <div id="attribute-i-require_paths" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">require_paths</span><span
            class="attribute-access-type">[R]</span>
        </div>

        <div class="method-description">
        
        <p>The require paths associated with the workspace.</p>

<p>@return [Array&lt;String&gt;]</p>
        
        </div>
      </div>
      
    </section>
    

    
     <section id="public-class-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Public Class Methods</h3>
       </header>

    
      <div id="method-c-new" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">new</span><span
            class="method-args">(directory = &#39;&#39;, config = nil)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>@param directory [String] @param config [Config, nil]</p>
          
          

          
          <div class="method-source-code" id="new-source">
            <pre><span class="ruby-comment"># File lib/solargraph/workspace.rb, line 24</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">initialize</span> <span class="ruby-identifier">directory</span> = <span class="ruby-string">&#39;&#39;</span>, <span class="ruby-identifier">config</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-ivar">@directory</span> = <span class="ruby-identifier">directory</span>
  <span class="ruby-ivar">@config</span> = <span class="ruby-identifier">config</span>
  <span class="ruby-identifier">load_sources</span>
  <span class="ruby-ivar">@gemnames</span> = []
  <span class="ruby-ivar">@require_paths</span> = <span class="ruby-identifier">generate_require_paths</span>
  <span class="ruby-identifier">require_plugins</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
     <section id="public-instance-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Public Instance Methods</h3>
       </header>

    
      <div id="method-i-config" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">config</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>@return [Solargraph::Workspace::Config]</p>
          
          

          
          <div class="method-source-code" id="config-source">
            <pre><span class="ruby-comment"># File lib/solargraph/workspace.rb, line 34</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">config</span>
  <span class="ruby-ivar">@config</span> <span class="ruby-operator">||=</span> <span class="ruby-constant">Solargraph</span><span class="ruby-operator">::</span><span class="ruby-constant">Workspace</span><span class="ruby-operator">::</span><span class="ruby-constant">Config</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">directory</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-filenames" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">filenames</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>@return [Array&lt;String&gt;]</p>
          
          

          
          <div class="method-source-code" id="filenames-source">
            <pre><span class="ruby-comment"># File lib/solargraph/workspace.rb, line 76</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">filenames</span>
  <span class="ruby-identifier">source_hash</span>.<span class="ruby-identifier">keys</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-gemspec-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">gemspec?</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>True if the workspace contains at least one gemspec file.</p>

<p>@return [Boolean]</p>
          
          

          
          <div class="method-source-code" id="gemspec-3F-source">
            <pre><span class="ruby-comment"># File lib/solargraph/workspace.rb, line 113</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">gemspec?</span>
  <span class="ruby-operator">!</span><span class="ruby-identifier">gemspecs</span>.<span class="ruby-identifier">empty?</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-gemspecs" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">gemspecs</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Get an array of all gemspec files in the workspace.</p>

<p>@return [Array&lt;String&gt;]</p>
          
          

          
          <div class="method-source-code" id="gemspecs-source">
            <pre><span class="ruby-comment"># File lib/solargraph/workspace.rb, line 120</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">gemspecs</span>
  <span class="ruby-keyword">return</span> [] <span class="ruby-keyword">if</span> <span class="ruby-identifier">directory</span>.<span class="ruby-identifier">empty?</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">directory</span> <span class="ruby-operator">==</span> <span class="ruby-string">&#39;*&#39;</span>
  <span class="ruby-ivar">@gemspecs</span> <span class="ruby-operator">||=</span> <span class="ruby-constant">Dir</span>[<span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-identifier">directory</span>, <span class="ruby-string">&#39;**/*.gemspec&#39;</span>)].<span class="ruby-identifier">select</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">gs</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">config</span>.<span class="ruby-identifier">allow?</span> <span class="ruby-identifier">gs</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-has_file-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">has_file?</span><span
            class="method-args">(filename)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>@param filename [String] @return [Boolean]</p>
          
          

          
          <div class="method-source-code" id="has_file-3F-source">
            <pre><span class="ruby-comment"># File lib/solargraph/workspace.rb, line 87</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">has_file?</span> <span class="ruby-identifier">filename</span>
  <span class="ruby-identifier">source_hash</span>.<span class="ruby-identifier">key?</span>(<span class="ruby-identifier">filename</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-merge" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">merge</span><span
            class="method-args">(source)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Merge the source. A merge will update the existing source for the file or add it to the sources if the workspace is configured to include it. The source is ignored if the configuration excludes it.</p>

<p>@param source [Solargraph::Source] @return [Boolean] True if the source was added to the workspace</p>
          
          

          
          <div class="method-source-code" id="merge-source">
            <pre><span class="ruby-comment"># File lib/solargraph/workspace.rb, line 44</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">merge</span> <span class="ruby-identifier">source</span>
  <span class="ruby-keyword">unless</span> <span class="ruby-identifier">directory</span> <span class="ruby-operator">==</span> <span class="ruby-string">&#39;*&#39;</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">source_hash</span>.<span class="ruby-identifier">key?</span>(<span class="ruby-identifier">source</span>.<span class="ruby-identifier">filename</span>)
    <span class="ruby-comment"># Reload the config to determine if a new source should be included</span>
    <span class="ruby-ivar">@config</span> = <span class="ruby-constant">Solargraph</span><span class="ruby-operator">::</span><span class="ruby-constant">Workspace</span><span class="ruby-operator">::</span><span class="ruby-constant">Config</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">directory</span>)
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">config</span>.<span class="ruby-identifier">calculated</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">source</span>.<span class="ruby-identifier">filename</span>)
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">source_hash</span>[<span class="ruby-identifier">source</span>.<span class="ruby-identifier">filename</span>] = <span class="ruby-identifier">source</span>
  <span class="ruby-keyword">true</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-remove" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">remove</span><span
            class="method-args">(filename)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Remove a source from the workspace. The source will not be removed if its file exists and the workspace is configured to include it.</p>

<p>@param filename [String] @return [Boolean] True if the source was removed from the workspace</p>
          
          

          
          <div class="method-source-code" id="remove-source">
            <pre><span class="ruby-comment"># File lib/solargraph/workspace.rb, line 69</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">remove</span> <span class="ruby-identifier">filename</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">source_hash</span>.<span class="ruby-identifier">key?</span>(<span class="ruby-identifier">filename</span>)
  <span class="ruby-identifier">source_hash</span>.<span class="ruby-identifier">delete</span> <span class="ruby-identifier">filename</span>
  <span class="ruby-keyword">true</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-source" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">source</span><span
            class="method-args">(filename)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Get a source by its filename.</p>

<p>@param filename [String] @return [Solargraph::Source]</p>
          
          

          
          <div class="method-source-code" id="source-source">
            <pre><span class="ruby-comment"># File lib/solargraph/workspace.rb, line 95</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">source</span> <span class="ruby-identifier">filename</span>
  <span class="ruby-identifier">source_hash</span>[<span class="ruby-identifier">filename</span>]
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-sources" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">sources</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>@return [Array&lt;Solargraph::Source&gt;]</p>
          
          

          
          <div class="method-source-code" id="sources-source">
            <pre><span class="ruby-comment"># File lib/solargraph/workspace.rb, line 81</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">sources</span>
  <span class="ruby-identifier">source_hash</span>.<span class="ruby-identifier">values</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-synchronize-21" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">synchronize!</span><span
            class="method-args">(updater)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Synchronize the workspace from the provided updater.</p>

<p>@param updater [Source::Updater] @return [void]</p>
          
          

          
          <div class="method-source-code" id="synchronize-21-source">
            <pre><span class="ruby-comment"># File lib/solargraph/workspace.rb, line 131</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">synchronize!</span> <span class="ruby-identifier">updater</span>
  <span class="ruby-identifier">source_hash</span>[<span class="ruby-identifier">updater</span>.<span class="ruby-identifier">filename</span>] = <span class="ruby-identifier">source_hash</span>[<span class="ruby-identifier">updater</span>.<span class="ruby-identifier">filename</span>].<span class="ruby-identifier">synchronize</span>(<span class="ruby-identifier">updater</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-would_merge-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">would_merge?</span><span
            class="method-args">(filename)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Determine whether a file would be merged into the workspace.</p>

<p>@param filename [String] @return [Boolean]</p>
          
          

          
          <div class="method-source-code" id="would_merge-3F-source">
            <pre><span class="ruby-comment"># File lib/solargraph/workspace.rb, line 58</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">would_merge?</span> <span class="ruby-identifier">filename</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">directory</span> <span class="ruby-operator">==</span> <span class="ruby-string">&#39;*&#39;</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">source_hash</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">filename</span>)
  <span class="ruby-ivar">@config</span> = <span class="ruby-constant">Solargraph</span><span class="ruby-operator">::</span><span class="ruby-constant">Workspace</span><span class="ruby-operator">::</span><span class="ruby-constant">Config</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">directory</span>)
  <span class="ruby-identifier">config</span>.<span class="ruby-identifier">calculated</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">filename</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-would_require-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">would_require?</span><span
            class="method-args">(path)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>True if the path resolves to a file in the workspace&#39;s require paths.</p>

<p>@param path [String] @return [Boolean]</p>
          
          

          
          <div class="method-source-code" id="would_require-3F-source">
            <pre><span class="ruby-comment"># File lib/solargraph/workspace.rb, line 103</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">would_require?</span> <span class="ruby-identifier">path</span>
  <span class="ruby-identifier">require_paths</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">rp</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span> <span class="ruby-keyword">if</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">exist?</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-identifier">rp</span>, <span class="ruby-node">&quot;#{path}.rb&quot;</span>))
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">false</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
     <section id="private-instance-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Private Instance Methods</h3>
       </header>

    
      <div id="method-i-configured_require_paths" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">configured_require_paths</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Get additional require paths defined in the configuration.</p>

<p>@return [Array&lt;String&gt;]</p>
          
          

          
          <div class="method-source-code" id="configured_require_paths-source">
            <pre><span class="ruby-comment"># File lib/solargraph/workspace.rb, line 193</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">configured_require_paths</span>
  <span class="ruby-keyword">return</span> [<span class="ruby-string">&#39;lib&#39;</span>] <span class="ruby-keyword">if</span> <span class="ruby-identifier">directory</span>.<span class="ruby-identifier">empty?</span>
  <span class="ruby-keyword">return</span> [<span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-identifier">directory</span>, <span class="ruby-string">&#39;lib&#39;</span>)] <span class="ruby-keyword">if</span> <span class="ruby-identifier">config</span>.<span class="ruby-identifier">require_paths</span>.<span class="ruby-identifier">empty?</span>
  <span class="ruby-identifier">config</span>.<span class="ruby-identifier">require_paths</span>.<span class="ruby-identifier">map</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">p</span><span class="ruby-operator">|</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-identifier">directory</span>, <span class="ruby-identifier">p</span>)}
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-generate_require_paths" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">generate_require_paths</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Generate require paths from gemspecs if they exist or assume the default lib directory.</p>

<p>@return [Array&lt;String&gt;]</p>
          
          

          
          <div class="method-source-code" id="generate_require_paths-source">
            <pre><span class="ruby-comment"># File lib/solargraph/workspace.rb, line 162</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">generate_require_paths</span>
  <span class="ruby-keyword">return</span> <span class="ruby-identifier">configured_require_paths</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">gemspec?</span>
  <span class="ruby-identifier">result</span> = []
  <span class="ruby-identifier">gemspecs</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">file</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">base</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">dirname</span>(<span class="ruby-identifier">file</span>)
    <span class="ruby-comment"># HACK: Evaluating gemspec files violates the goal of not running</span>
    <span class="ruby-comment">#   workspace code, but this is how Gem::Specification.load does it</span>
    <span class="ruby-comment">#   anyway.</span>
    <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">chdir</span> <span class="ruby-identifier">base</span> <span class="ruby-keyword">do</span>
      <span class="ruby-keyword">begin</span>
        <span class="ruby-comment"># @type [Gem::Specification]</span>
        <span class="ruby-identifier">spec</span> = <span class="ruby-identifier">eval</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">read</span>(<span class="ruby-identifier">file</span>), <span class="ruby-constant">TOPLEVEL_BINDING</span>, <span class="ruby-identifier">file</span>)
        <span class="ruby-keyword">next</span> <span class="ruby-keyword">unless</span> <span class="ruby-constant">Gem</span><span class="ruby-operator">::</span><span class="ruby-constant">Specification</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">spec</span>
        <span class="ruby-ivar">@gemnames</span>.<span class="ruby-identifier">push</span> <span class="ruby-identifier">spec</span>.<span class="ruby-identifier">name</span>
        <span class="ruby-identifier">result</span>.<span class="ruby-identifier">concat</span>(<span class="ruby-identifier">spec</span>.<span class="ruby-identifier">require_paths</span>.<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">path</span><span class="ruby-operator">|</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-identifier">base</span>, <span class="ruby-identifier">path</span>) })
      <span class="ruby-keyword">rescue</span> <span class="ruby-constant">RuntimeError</span>, <span class="ruby-constant">ScriptError</span>, <span class="ruby-constant">Errno</span><span class="ruby-operator">::</span><span class="ruby-constant">ENOENT</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-identifier">e</span>
        <span class="ruby-comment"># Don&#39;t die if we have an error during eval-ing a gem spec.</span>
        <span class="ruby-comment"># Concat the default lib directory instead.</span>
        <span class="ruby-constant">Solargraph</span>.<span class="ruby-identifier">logger</span>.<span class="ruby-identifier">warn</span> <span class="ruby-node">&quot;Error reading #{file}: [#{e.class}] #{e.message}&quot;</span>
        <span class="ruby-identifier">result</span>.<span class="ruby-identifier">push</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-identifier">base</span>, <span class="ruby-string">&#39;lib&#39;</span>)
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">result</span>.<span class="ruby-identifier">concat</span> <span class="ruby-identifier">config</span>.<span class="ruby-identifier">require_paths</span>
  <span class="ruby-identifier">result</span>.<span class="ruby-identifier">push</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-identifier">directory</span>, <span class="ruby-string">&#39;lib&#39;</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">result</span>.<span class="ruby-identifier">empty?</span>
  <span class="ruby-identifier">result</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-load_sources" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">load_sources</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>@return [void]</p>
          
          

          
          <div class="method-source-code" id="load_sources-source">
            <pre><span class="ruby-comment"># File lib/solargraph/workspace.rb, line 143</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">load_sources</span>
  <span class="ruby-identifier">source_hash</span>.<span class="ruby-identifier">clear</span>
  <span class="ruby-keyword">unless</span> <span class="ruby-identifier">directory</span>.<span class="ruby-identifier">empty?</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">directory</span> <span class="ruby-operator">==</span> <span class="ruby-string">&#39;*&#39;</span>
    <span class="ruby-identifier">size</span> = <span class="ruby-identifier">config</span>.<span class="ruby-identifier">calculated</span>.<span class="ruby-identifier">length</span>
    <span class="ruby-identifier">raise</span> <span class="ruby-constant">WorkspaceTooLargeError</span>, <span class="ruby-node">&quot;The workspace is too large to index (#{size} files, #{config.max_files} max)&quot;</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">config</span>.<span class="ruby-identifier">max_files</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span> <span class="ruby-keyword">and</span> <span class="ruby-identifier">size</span> <span class="ruby-operator">&gt;</span> <span class="ruby-identifier">config</span>.<span class="ruby-identifier">max_files</span>
    <span class="ruby-identifier">config</span>.<span class="ruby-identifier">calculated</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">filename</span><span class="ruby-operator">|</span>
      <span class="ruby-keyword">begin</span>
        <span class="ruby-identifier">source_hash</span>[<span class="ruby-identifier">filename</span>] = <span class="ruby-constant">Solargraph</span><span class="ruby-operator">::</span><span class="ruby-constant">Source</span>.<span class="ruby-identifier">load</span>(<span class="ruby-identifier">filename</span>)
      <span class="ruby-keyword">rescue</span> <span class="ruby-constant">Errno</span><span class="ruby-operator">::</span><span class="ruby-constant">ENOENT</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-identifier">e</span>
        <span class="ruby-constant">Solargraph</span>.<span class="ruby-identifier">logger</span>.<span class="ruby-identifier">warn</span>(<span class="ruby-node">&quot;Error loading #{filename}: [#{e.class}] #{e.message}&quot;</span>)
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-require_plugins" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">require_plugins</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="require_plugins-source">
            <pre><span class="ruby-comment"># File lib/solargraph/workspace.rb, line 199</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">require_plugins</span>
  <span class="ruby-identifier">config</span>.<span class="ruby-identifier">plugins</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">plugin</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword">begin</span>
      <span class="ruby-identifier">require</span> <span class="ruby-identifier">plugin</span>
    <span class="ruby-keyword">rescue</span> <span class="ruby-constant">LoadError</span>
      <span class="ruby-constant">Solargraph</span>.<span class="ruby-identifier">logger</span>.<span class="ruby-identifier">warn</span> <span class="ruby-node">&quot;Failed to load plugin &#39;#{plugin}&#39;&quot;</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-source_hash" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">source_hash</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>@return [Hash{String =&gt; Solargraph::Source}]</p>
          
          

          
          <div class="method-source-code" id="source_hash-source">
            <pre><span class="ruby-comment"># File lib/solargraph/workspace.rb, line 138</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">source_hash</span>
  <span class="ruby-ivar">@source_hash</span> <span class="ruby-operator">||=</span> {}
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
  </section>

</main>


<footer id="validator-badges" role="contentinfo">
  <p><a href="https://validator.w3.org/check/referer">Validate</a>
  <p>Generated by <a href="https://ruby.github.io/rdoc/">RDoc</a> 6.2.1.
  <p>Based on <a href="http://deveiate.org/projects/Darkfish-RDoc/">Darkfish</a> by <a href="http://deveiate.org">Michael Granger</a>.
</footer>

